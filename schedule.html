<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  <script>
    async function handleSubmit(event) {
      event.preventDefault(); // Prevent default form submission

      const formData = new FormData(event.target);
      const formObject = Object.fromEntries(formData.entries());

      try {
        const response = await fetch('https://pindrop-iyxx.onrender.com/submit-form', {
          method: 'POST',
          body: JSON.stringify(formObject),
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${process.env.API_KEY}`
          }
        });

        const result = await response.json();

        if (response.ok) {
          // Redirect to success page
          window.location.href = 'https://pindrop-iyxx.onrender.com/success.html'; // Use your deployed success.html page
        } else {
          alert('Form submission failed: ' + result.message);
        }
      } catch (error) {
        alert('An error occurred: ' + error.message);
      }
    }
  </script>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background: linear-gradient(to bottom, #405a65, #299cb8, #00ffea);
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Container */
    .container {
      width: 100%;
      max-width: 400px;
      background: rgba(255, 255, 255, 0.9);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
      color: #435a64;
      animation: fadeIn 0.6s ease-in-out;
      text-align: left;
      box-sizing: border-box;
    }

    /* Headings */
    h1, h2 {
      text-align: center;
      margin-bottom: 8px;
    }

    h1 {
      font-size: 18px;
      color: #405a65;
    }

    h2 {
      font-size: 12px;
      color: #299cb8;
      font-weight: normal;
    }

    /* Form */
    .form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    /* Input Fields */
    input, select, textarea {
      width: 100%;
      padding: 8px;
      border: 2px solid #299cb8;
      border-radius: 8px;
      font-size: 12px;
      background-color: rgba(255, 255, 255, 0.8);
      outline: none;
      transition: border-color 0.3s ease-in-out;
      box-sizing: border-box;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #405a65;
    }

    /* Buttons */
    button {
      background: linear-gradient(to right, #299cb8, #00ffea);
      color: #fff;
      padding: 10px;
      font-size: 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease-in-out;
      width: 100%;
    }

    button:hover {
      background: linear-gradient(to right, #405a65, #299cb8);
      transform: scale(1.05);
    }

    /* Location Button */
    .location-btn {
      background-color: #007bff;
      font-size: 12px;
      padding: 10px;
      border-radius: 8px;
      display: block;
      width: 100%;
      text-align: center;
    }

    .location-btn:hover {
      background-color: #0056b3;
    }

    /* Images */
    img {
      display: block;
      margin: 0 auto 10px;
      max-width: 80px;
      height: auto;
    }

    .recaptcha-container {
      margin-top: 20px;
      text-align: center;
    }

    .g-recaptcha {
      display: inline-block;
    }

    /* Media Queries for Responsiveness */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
        max-width: 90%;
      }

      h1 {
        font-size: 16px;
      }

      h2 {
        font-size: 12px;
      }

      input, select, textarea {
        padding: 6px;
        font-size: 10px;
      }

      button {
        padding: 10px;
        font-size: 12px;
      }

      .location-btn {
        font-size: 12px;
        padding: 8px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 5px;
        max-width: 95%;
      }

      h1 {
        font-size: 14px;
      }

      h2 {
        font-size: 10px;
      }

      input, select, textarea {
        padding: 6px;
        font-size: 10px;
      }

      button {
        padding: 10px;
        font-size: 12px;
      }

      .location-btn {
        font-size: 12px;
        padding: 8px;
      }
    }

  </style>
  <title>PinDrop.com/schedule a pickup</title>
</head>
<body>
  <div class="container">
    <form id="pickupForm" onsubmit="handleSubmit(event)">
      <img src="images/Copy_of_announcing_the_marriage_of-removebg-preview.png" alt="Logo">
      <h1>Schedule Pickup</h1>
      <h2>Pickups available from 8AM - 4PM ONLY</h2>
      
      <!-- Input Fields -->
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" required>

      <label for="email">Email</label>
      <input type="email" id="email" name="email" required>

      <label for="phone">Phone Number</label>
      <input type="tel" id="phone" name="phone" required>

      <label for="address">Pickup Address</label>
      <textarea id="address" name="address" rows="2" required></textarea>
      <button type="button" class="location-btn" onclick="getLocation()">Use My Location</button>

      <label for="date">Pickup Date</label>
      <input type="date" id="date" name="date" required>

      <label for="time">Pickup Time</label>
      <input type="time" id="time" name="time" required>

      <label for="service">Service</label>
      <select id="service" name="service" required>
        <option value="Not Selected">Select Option</option>
        <option value="carwash_1_5">Mobile Carwash (1-5)</option>
        <!-- Add other options here -->
      </select>
      
      <label for="site">Select Site</label>
      <select name="site" id="site" required>
        <option value="Not Selected">Select Option</option>
        <option value="On-Site (YOUR HOME)">On-Site (Your Home)</option>
        <option value="Away">Away</option>
      </select>

      <label for="delivery">Service Delivery</label>
      <select name="delivery" id="delivery" required>
        <option value="Not Selected">Select Option for laundry Delivery</option>
        <option value="Same day Service">Same day Service (6-10 hours)</option>
        <!-- Add other options here -->
      </select>

      <label for="scent">Scented/Unscented</label>
      <select name="scent" id="scent" required>
        <option value="Not Selected">Do you want your laundry Scented or Unscented</option>
        <option value="Scented">Scented</option>
        <option value="Unscented">Unscented</option>
      </select> 

      <div class="recaptcha-container">
        <div class="g-recaptcha" data-sitekey="6Ld4-f8qAAAAABTVrljD1KEHNvnD-CWPfccKoDw0"></div>
      </div>

      <button type="submit">Submit</button>
    </form>
  </div>
</body>
</html>
